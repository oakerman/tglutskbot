#  Copyright (c) ChernV (@otter18), 2021.

import os
import random

from setup import bot, logger
from webhook import app

# --------------- dialog params -------------------
dialog = {
    'shisha': {
        'in': ['–∫–∞–ª—å—è–Ω', '–∫–∞–ª—é—Å—ñ–∫', '–∫–æ–ª—è', '–Ω—ñ–∫–∞–ª–∞–π'],
        'out': ['–û, —Å—å–æ–≥–æ–¥–Ω—ñ –∫—É—Ä–∏–º?']
    },
    'shisha_soft': {
        'in': ['—Ç–∞–±–∞–∫', '—Ç–∞–±–∞–∫–∏', '—Ç–∞–±–∞—á–∫–∏', '—É–≥–ª—ñ', '–≤—É–≥—ñ–ª–ª—è', '—Ç–∞–±–∞—á–æ–∫'],
        'out': ['–ö–∞–ª—å—è–Ω –≤–∏–∑–∏–≤–∞—î –±–∞–∑—É']
    },
    'igor': {
        'in': ['—ñ–≥–æ—Ä', '—ñ–≥–∞—Ä—å–æ–∫'],
        'out': ['–Ü–≥–∞—Ä—å–æ–∫, —Å–∫—ñ–ª—å–∫–∏ —Ä–∞–∑—ñ–≤ –ø—ñ–¥—Ç—è–≥–Ω–µ—à—Å—è?', '–û, –Ü–≥–∞—Ä—å–æ–∫', '–Ü–≥–∞—Ä—å–æ–∫, –≥–æ –Ω–∞ –ø–∏–≤–æ?', '–ü–æ –ø–∏–≤–∫—É?', '–Ü—ñ—ñ–≥–∞–∞—Ä—å', '–ù–µ –Ü–≥–∞—Ä—å –∞ –ì—ñ–≥–∞', '–û, –Ü–≥–∞—Ä—å–æ–∫,–ø–æ–∫–æ—Ä–º–∏ –æ—Å–∫–∞—Ä–∞']
    },
    'mishka': {
        'in': ['–º—ñ—à–∞', '–º—ñ—à–∫–∞'],
        'out': ['–ú—ñ—à–∞-–ú–∞–≤–∞—à–∏', '–ú—ñ—à–∞-–õ–∞–≤–∞—à–∏–∫','–°–∞–º —Ç–∏ –ú—ñ—à–∫–∞', '–ú—ñ—à–∫–∞ –∫–ª–∏–Ω –∫–ª–∏–Ω–æ–º', '–ú—ñ—à–∫–∞ —Ö—É–π', '–ê —à–æ –∑—Ä–∞–∑—É –ú—ñ—à–∫–∞?', '–ú—ñ—à–∫–∞? –†–æ–º–∞–Ω–∏ –±–∏–≤—à–∏–π?', '–ú—ñ—à–∫–∞ –º–µ—Ç—Ä –∑ –∫—ç–ø–∫–æ–π', '–ú—ñ—à–∫–∞-—Ö—É—ó—à–∫–∞']
    },
    'pivas': {
        'in': ['–ø–∏–≤–æ', '–ø—ñ–≤–∞—Å', '–ø—ñ–≤–∞—Å—ñ–∫', '–ª—É—á–∞–Ω', '–∞–∫—Ü–µ–Ω—Ç', '–∫—î–≥–∞', '–∫–µ–≥–∞', '–±–∞–∫–∞–ª', '–±–æ–∫–∞–ª', '–±–∞–∫–∞–ª—å—á–∏–∫', '–±–∞–∫–∞–ª—å—á–∏–∫—É'],
        'out': ['–ê–ª–∫–∞—à.', '–ê–ª–∫–∞—à–∫–∞.', '–ê–ª–∫–∞—à–∏.', '–æ–æ–æ–æ –±—É—Ö—ñ—á!!!', '–∞ –º–æ–∂–µ —à–æ –ø–æ–∫—Ä—î–ø—á—î?', '–≥–æ', '—è –∑–∞', '—Å–∞–º –ø–∏–π, —Ö—É–π']
    },
    'tsypah': {
        'in': ['—Ü—é–ø–∞—Ö', '—Ü—é–ø—è—Ö'],
        'out': ['—Ü—é–ø–∞—Ö-—Ö—É—é–ø–∞—Ö']
    },
    'tsypah2': {
        'in': ['—Ü—é–ø–∞—à–Ω—è', '—Ü—é–ø–∞—à–Ω—è—à–∫–∞'],
        'out': ['—Ü—é–ø–∞—à–Ω—è-—Ö—É—è—à–Ω—è']
    },
    'narod': {
        'in': ['–Ω–∞—Ä–æ–¥'],
        'out': ['–ù–∞—Ä–æ–¥ - —Ö—É–π —Ç–æ–±—ñ –≤ —Ä–æ—Ç']
    },
    'narod2': {
        'in': ['—Ä—ñ–±—è—Ç–∞', '—Ä—î–±—è—Ç–∞'],
        'out': ['–†—ñ–±—è—Ç–∞ - –¢—ñ—Ä—ñ–±—è—Ç–∞']
    },
    'hi': {
        'in': ['–ø—Ä–∏–≤—ñ—Ç', '–ø—Ä—ñ–≤—î—Ç', '—Ö–∞–π'],
        'out': ['–ü—Ä—ñ–≤—î—Ç.', '–•–∞–π.']
    },
    'typo1': {
        'in': ['–º–∞—ó—à'],
        'out': ['*–º–∞—î—à']
    },
    'typo2': {
        'in': ['—Ö–æ—á–∏—à'],
        'out': ['*—Ö–æ—á–µ—à']
    },
    'typo3': {
        'in': ['–±—É–¥–∏—à'],
        'out': ['*–±—É–¥–µ—à']
    },
    'typo4': {
        'in': ['–±—É–¥–∏—à'],
        'out': ['*–±—É–¥–µ—à']
    },
    'hello': {
        'in': ['–∞–ª—å–æ', '–∞–ª–æ'],
        'out': ['–∞–ª—å–æ-–∞–ª—å–æ, —è –Ω–∞ —Å–≤—è–∑—ñ?']
    },
    'home': {
        'in': ['–ø–æ –¥–æ–º–∞–º', '–≤–¥–æ–º–∞'],
        'out': ['—Ö–∞-—Ö–∞, –¥–æ–º–æ—Å—î–¥–∏']
    },
    'pass': {
        'in': ['–ø–∞—Å', '–ø–∞—Å—Å'],
        'out': ['—Ö—É—è—Å.']
    },
    'antonio': {
        'in': ['–∞–Ω—Ç–æ–Ω', '–∞–Ω—Ç–æ—à–∫–∞', '–∞–Ω—Ç–æ–Ω—ñ–Ω–∞'],
        'out': ['–ê–Ω—Ç–æ—à–∫–∞-—Ö—É–π–æ—à–∫–∞', '–í—Å–º–∏—Å–ª—ñ?', '–ê–Ω—Ç–æ—à–∫–∞, —è–∫ —Ç–∞–º —Ç–≤–æ—è –∫–æ–ª–ª–µ–∫—Ü—ñ—è –±—É—Ç–∏–ª–æ—á–æ–∫?']
    },
    'happy': {
        'in': ['–≤—ñ—Ç–∞—é', '–≤—ñ—Ç–∞—î–º–æ', '–ø—Ä–∏—î–¥–Ω—É—é—Å—å', '—Ö–µ–ø—ñ', '—Ö–µ–ø–ø—ñ', '–¥–µ–Ω—å—á—ñ–∫', '–¥–µ–Ω—å—á—ñ–∫–æ–º'],
        'out': ['–í—ñ—Ç–∞—î–º–æ']
    },
    'g1': {
        'in': ['–º–µ–¥', '–≥–æ—Ä—ñ—Ö', '–≥–æ—Ä—ñ—Ö–∏', '—Ü—É–∫–µ—Ä–∫–∏', '—à–æ–∫–æ–ª–∞–¥', '—à–æ–∫–æ–ª–∞–¥–∫–∞', '–ø–∏–ª—é–∫–∞', '—Ü–≤—ñ—Ç', '–æ—Å–∞', '–æ—Å–∏', '–±–¥–∂–æ–ª–∞', '–±–¥–∂–æ–ª–∏'],
        'out': ['–í –ñ—É—Ä–∞–≤–∞–ª—å–æ–≤–∞ –Ω–∞ —Ü–µ –∞–ª–µ—Ä–≥—ñ—è.']
    },
    'g2': {
        'in': ['–∂—É—Ä–∞–≤–ª—å–æ–≤'],
        'out': ['–ñ—É—Ä–∞–≤–∞–ª—å–æ–≤ + –∞–ª–µ—Ä–≥—ñ—è = –ú–æ–Ω–≥–æ–ª']
    },
    'petl1': {
        'in': ['–ü–µ—Ç–ª—é—Ä–∏–∫—É', '–ü–µ—Ç–ª—é—Ä–∏–∫—É?', '–ü–µ—Ç–ª—é—Ä–∏–∫'],
        'out': ['–ü–µ—Ç–ª—é—Ä–∏–∫-—Ö—É—é—Ä–∏–∫.']
    },
    'lovenicheck1': {
        'in': ['–ª–∞–≤–Ω—ñ—á–µ–∫', '–ª–∞–≤–Ω—ñ—á–µ–∫'],
        'out': ['–õ–∞–≤–Ω—ñ—á–µ–∫, –¥–µ –ø—Ä–∞–≤–∞ –∑–≥—É–±–∏–≤?']
    },
    'football1': {
        'in': ['—Ñ—É—Ç–±—ñ–∫', '—Ñ—É—Ç–±–æ–ª'],
        'out': ['–§—É—Ç–±–æ–ª –¥–ª—è –ª–æ—Ö—ñ–≤']
    },
    'volyn1': {
        'in': ['–≤–æ–ª–∏–Ω—å', '–¥–∏–Ω–∞–º–æ', '–≥—Ä–∞'],
        'out': ['–í–æ–ª–∏–Ω—å - —á–µ–º–ø—ñ–æ–Ω!']
    },
    'olga1': {
        'in': ['–æ–ª—è', '–æ–ª—å–∫–∞', '–≥–æ–ª—è—á—É–∫'],
        'out': ['–û–ª—å–∫–∞, –∫–æ–ª–∏ –≤ –ª—É—Ü—å–∫?']
    },
    'go': {
        'in': ['–ø–∞—Ä–∫', '–≥—É–ª—è—Ç–∏'],
        'out': ['–Ω—î, –Ω–µ –ø—ñ–¥—É, –ø–æ–≥–æ–¥–∫–∞ –≥–∞–≤–Ω–æ']
    },
    'go2': {
        'in': ['–ø–æ–≥–æ–¥–∞', '–ø–æ–≥–æ–¥–∫–∞'],
        'out': ['–ø–æ–≥–æ–¥–∫–∞ –ø—ñ—Ç—å—î–≤–∞']
    },
    'kolyba': {
        'in': ['–∫–æ–ª–∏–±–∞', '–∫–æ–ª–∏–±—É', '–∫–æ–ª–∏–±—ñ', '—Å—Ç–µ–ø–æ–≤–∞', '—Å—Ç–µ–ø–æ–≤—É', '—Å—Ç–µ–ø–æ–≤—ñ–π'],
        'out': ['–ó–Ω–æ–≤—É –≤ –∫–æ–ª–∏–±—É –Ω–∞ —Å—Ç–µ–ø–æ–≤—ñ–π?']
    },
    '3sta': {
        'in': ['—Ç—Ä–∏—Å—Ç–∞', ' 300 '],
        'out': ['–í—ñ–¥—Å–æ—Å–∏ —É —Ç—Ä–∞–∫—Ç–æ—Ä–∏—Å—Ç–∞']
    },
    '3sta': {
        'in': ['—Ç—Ä–∏—Å—Ç–∞', ' 300 '],
        'out': ['–í—ñ–¥—Å–æ—Å–∏ —É —Ç—Ä–∞–∫—Ç–æ—Ä–∏—Å—Ç–∞']
    },
    'valentin': {
        'in': ['–≤–∞–ª–µ–Ω—Ç–∏–Ω–∞', '–≤–∞–ª–µ–Ω—Ç–∏–Ω', '14 –ª—é—Ç–æ–≥–æ'],
        'out': ['–∑–Ω–æ–≤ –õ—î–Ω–∞ –Ω–∞–ø\'—î—Ç—å—Å—è?']
    },
    'ga': {
        'in': ['–ø—Ä–∞–ø–æ—Ä'],
        'out': ['üè≥Ô∏è‚Äçüåà']
    }
}


# --------------- bot -------------------
@bot.message_handler(commands=['help', 'start'])
def say_welcome(message):
    logger.info(f'</code>@{message.from_user.username}<code> ({message.chat.id}) used /start or /help')
    bot.send_message(
        message.chat.id,
        '<b>Hello! This is a telegram bot template written by <a href="https://github.com/otter18">otter18</a></b>',
        parse_mode='html'
    )


@bot.message_handler(func=lambda message: True)
def echo(message):
    for t, resp in dialog.items():
        if sum([e in message.text.lower() for e in resp['in']]):
            logger.info(f'</code>@{message.from_user.username}<code> ({message.chat.id}) used {t}:\n\n%s', message.text)
            bot.send_message(message.chat.id, random.choice(resp['out']))
            return

    logger.info(f'</code>@{message.from_user.username}<code> ({message.chat.id}) used echo:\n\n%s', message.text)


if __name__ == '__main__':
    if os.environ.get("IS_PRODUCTION", "False") == "True":
        app.run()
    else:
        bot.infinity_polling()
